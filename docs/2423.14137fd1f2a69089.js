"use strict";(self.webpackChunkgoalpost_primeng=self.webpackChunkgoalpost_primeng||[]).push([[2423],{2423:(Q,y,l)=>{l.r(y),l.d(y,{LeagueSiteRoutingModule:()=>V});var c=l(2129),h=l(6814),e=l(9467),u=l(707),f=l(4532);class A{constructor(a,i){this.plays=a,this.playerGame=i;const s=a.filter(t=>t.passer===this.playerGame.id),o=s.filter(t=>t.completedPass);this.passingAttempts=s.length,this.passingCompletions=o.length,this.passingYardage=o.map(t=>t.yardage).reduce((t,g)=>t+g,0),this.passingTds=o.filter(t=>6===t.points).length,this.passingOnePointConversions=o.filter(t=>1===t.points).length,this.passingTwoPointConversions=o.filter(t=>2===t.points).length,this.passingInterceptions=s.filter(t=>"interception"===t.turnoverType).length;const r=a.filter(t=>t.rusher===this.playerGame.id);this.rushingAttempts=r.length,this.rushingYardage=r.map(t=>t.yardage).reduce((t,g)=>t+g,0),this.rushingTds=r.filter(t=>6===t.points).length,this.rushingOnePointConversions=r.filter(t=>1===t.points).length,this.rushingTwoPointConversions=r.filter(t=>2===t.points).length,this.offensiveFumbles=r.filter(t=>"fumble"===t.turnoverType).length,this.offensiveSacks=r.filter(t=>t.sack).length;const _=a.filter(t=>t.receiver===this.playerGame.id),p=_.filter(t=>t.completedPass);this.receivingTargets=_.length,this.receivingCompletions=p.length,this.receivingYardage=p.map(t=>t.yardage).reduce((t,g)=>t+g,0),this.receivingTds=p.filter(t=>6===t.points).length,this.receivingOnePointConversions=p.filter(t=>1===t.points).length,this.receivingTwoPointConversions=p.filter(t=>2===t.points).length,this.offensiveFumbles+=p.filter(t=>"fumble"===t.turnoverType).length;const b=a.filter(t=>t.flagPuller===this.playerGame.id);this.flagPulls=b.length,this.defensiveSacks=b.filter(t=>t.sack).length;const d=a.filter(t=>t.turnoverPlayer===this.playerGame.id);this.defensiveFumbles=d.filter(t=>"fumble"===t.turnoverType).length,this.defensiveInterceptions=d.filter(t=>"interception"===t.turnoverType).length,this.defensiveTds=d.filter(t=>6===t.points).length,this.defensiveOnePointConversions=d.filter(t=>1===t.points).length,this.defensiveTwoPointConversions=d.filter(t=>2===t.points).length,this.pointsScored=6*(this.rushingTds+this.receivingTds+this.defensiveTds)+2*(this.rushingTwoPointConversions+this.receivingTwoPointConversions+this.defensiveTwoPointConversions)+this.rushingOnePointConversions+this.receivingOnePointConversions+this.defensiveOnePointConversions}}class C{constructor(a,i,s){this.plays=a,this.roster=i,this.teamId=s,this.playerStats=i.map(o=>new A(a,o)),this.score=this.playerStats.map(o=>o.pointsScored).reduce((o,r)=>o+r,0)}}class L{constructor(a){this.game=a,this.homeTeamStats=new C(a.plays,a.homeRoster,a.homeTeamId),this.awayTeamStats=new C(a.plays,a.awayRoster,a.awayTeamId)}}var T,F=l(7328),w=l(7398),x=l(2096);let v=(()=>{class n{static#t=this.LeagueStorageKey="league";#n=new F.t(1);#e;constructor(){this.#e=this.#s(),this.#n.next(this.#e),this.watchLeague$().subscribe({next:i=>this.#i(i)})}watchLeague$(){return this.#n.asObservable()}watchTeam$(i){return this.watchLeague$().pipe((0,w.U)(s=>s.teams.find(o=>o.id===i)))}watchTeams$(){return this.watchLeague$().pipe((0,w.U)(i=>i.teams))}#i(i){localStorage.setItem(T.LeagueStorageKey,JSON.stringify(i))}resetLeague(){this.#e={teams:[{name:"Washington",id:"WASH"},{name:"Oregon",id:"ORE"}]},this.#i(this.#e)}#s(){const i=localStorage.getItem(T.LeagueStorageKey);try{return JSON.parse(i)}catch{return this.resetLeague(),this.#e}}createTeam(i){if(!i.id||!i.name)throw new Error("Team must have ID and name.");if(this.#e.teams.find(s=>s.name===i.name))throw new Error("Team name already exists.");if(this.#e.teams.find(s=>s.id===i.id))throw new Error("Team ID already exists.");return this.#e.teams.push({...i}),this.#n.next(this.#e),(0,x.of)(i)}deleteTeam(i){return this.#e.teams=this.#e.teams.filter(s=>s.id!=i),this.#n.next(this.#e),(0,x.of)(!0)}static#a=this.\u0275fac=function(s){return new(s||n)};static#o=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function I(n,a){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const i=a.$implicit;e.xp6(1),e.HOy(" ",i.playerGame.id," - ",i.passingCompletions,"/",i.passingAttempts," for ",i.passingYardage," yards ")}}T=v;const J=n=>["/","teams",n];function j(n,a){if(1&n&&(e.TgZ(0,"li")(1,"a",0),e._uU(2),e.qZA()()),2&n){const i=a.$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(2,J,i.id)),e.xp6(1),e.Oqu(i.name)}}function O(n,a){1&n&&(e.TgZ(0,"ul"),e.SjG(1,j,3,4,"li",null,e.ikw),e.qZA()),2&n&&(e.xp6(1),e.wJu(a.teams))}let $=(()=>{class n{#t;constructor(){this.#t=(0,e.f3M)(v),this.league$=this.#t.watchLeague$(),this.gameStats=new L({id:"001",homeTeamId:"01",awayTeamId:"02",homeRoster:[{id:"jd",jersey:"21"},{id:"tommy",jersey:"69"}],awayRoster:[{id:"layla",jersey:"99"}],startTime:0,location:"Lumen Field",status:"Finished",homeScore:0,awayScore:0,plays:[{id:"01",index:0,down:1,distanceToGo:10,yardLine:25,yardage:6,type:"passing",offensiveTeamId:"01",defensiveTeamId:"02",completedPass:!0,earnedFirstDown:!1,points:0,sack:!1,passer:"jd",receiver:"tommy",flagPuller:"layla"}]})}static#n=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["home-page"]],standalone:!0,features:[e.jDz],decls:6,vars:3,consts:[[3,"routerLink"]],template:function(s,o){if(1&s&&(e.TgZ(0,"h1"),e._uU(1,"Home Page"),e.qZA(),e.SjG(2,I,2,4,"div",null,e.ikw),e.YNc(4,O,3,0,"ul"),e.ALo(5,"async")),2&s){let r;e.xp6(2),e.wJu(o.gameStats.homeTeamStats.playerStats),e.xp6(2),e.um2(4,(r=e.lcZ(5,1,o.league$))?4:-1,r)}},dependencies:[h.ez,h.Ov,c.Bz,c.rH,f.d,u.hJ],encapsulation:2})}return n})();var k=l(5592);function G(n,a){1&n&&(e.TgZ(0,"h1"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu(a.name))}function N(n,a){1&n&&(e.TgZ(0,"h1"),e._uU(1,"Team is not found."),e.qZA())}let z=(()=>{class n{constructor(){this.#t=(0,e.f3M)(v),this.#n=(0,e.f3M)(c.F0),this.team$=new k.y}#t;#n;ngOnInit(){this.team$=this.#t.watchTeam$(this.id)}deleteTeam(){this.#t.deleteTeam(this.id).subscribe({next:()=>this.#n.navigate(["/"])})}static#e=this.\u0275fac=function(s){return new(s||n)};static#i=this.\u0275cmp=e.Xpm({type:n,selectors:[["view-team"]],inputs:{id:"id"},standalone:!0,features:[e.jDz],decls:5,vars:3,consts:[[1,"flex","justify-content-end"],["label","Delete Team","icon","pi pi-times","severity","danger",3,"onClick"]],template:function(s,o){if(1&s&&(e.YNc(0,G,2,1,"h1"),e.ALo(1,"async"),e.YNc(2,N,2,0),e.TgZ(3,"div",0)(4,"p-button",1),e.NdJ("onClick",function(){return o.deleteTeam()}),e.qZA()()),2&s){let r;e.um2(0,(r=e.lcZ(1,1,o.team$))?0:2,r)}},dependencies:[h.ez,h.Ov,c.Bz,f.d,u.hJ,u.zx],encapsulation:2})}return n})();var m=l(95),S=l(3714),Z=l(9502),P=l(3259),U=l(5219);function D(n,a){if(1&n){const i=e.EpF();e.TgZ(0,"p-messages",12),e.NdJ("valueChange",function(o){e.CHM(i);const r=e.oxw();return e.KtG(r.errors=o)}),e.qZA()}if(2&n){const i=e.oxw();e.Q6J("value",i.errors)("enableService",!1)}}const H=()=>["/"];function E(n,a){if(1&n){const i=e.EpF();e.TgZ(0,"div",13)(1,"p-button",14),e.NdJ("onClick",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.createTeam())}),e.qZA(),e._UZ(2,"p-button",15),e.qZA()}if(2&n){const i=e.oxw();e.xp6(1),e.Q6J("disabled",!i.form.valid||!i.form.dirty),e.xp6(1),e.Q6J("routerLink",e.DdM(2,H))}}const M=n=>["/","teams",n];function Y(n,a){if(1&n&&(e.TgZ(0,"li")(1,"a",16),e._uU(2),e.qZA()()),2&n){const i=a.$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(3,M,i.id)),e.xp6(1),e.AsE("",i.id," - ",i.name,"")}}function q(n,a){1&n&&(e.TgZ(0,"ul"),e.SjG(1,Y,3,5,"li",null,e.ikw),e.qZA()),2&n&&(e.xp6(1),e.wJu(a))}let R=(()=>{class n{constructor(){this.#t=(0,e.f3M)(v),this.#n=(0,e.f3M)(c.F0),this.#e=(0,e.f3M)(m.qu),this.form=this.#e.group({id:this.#e.nonNullable.control("",[m.kI.required,m.kI.minLength(2),m.kI.maxLength(4)]),name:this.#e.nonNullable.control("",[m.kI.required,m.kI.minLength(4),m.kI.maxLength(25)])}),this.teams$=this.#t.watchTeams$(),this.errors=new Array}#t;#n;#e;createTeam(){if(!this.form.valid)throw new Error("Form is not valid.");const i=this.form.value;this.errors=[];try{this.#t.createTeam({id:i.id,name:i.name}).subscribe({})}catch(s){this.errors.push({severity:"error",summary:"Error",detail:s.message})}}static#i=this.\u0275fac=function(s){return new(s||n)};static#s=this.\u0275cmp=e.Xpm({type:n,selectors:[["create-team"]],standalone:!0,features:[e.jDz],decls:17,vars:7,consts:[[1,"flex","gap-3"],["header","Create Team",1,"w-30rem"],[3,"formGroup","ngSubmit"],[1,"p-fluid"],[1,"field"],["htmlFor","id"],["pInputText","","id","id","formControlName","id","placeholder","Enter an ID","pTooltip","2-4 characters","tooltipPosition","bottom",3,"maxlength"],["htmlFor","name"],["pInputText","","id","name","formControlName","name","placeholder","Enter a name","pTooltip","4-25 characters","tooltipPosition","bottom",3,"maxlength"],[3,"value","enableService"],["pTemplate","footer"],["header","Current Teams",1,"w-15rem"],[3,"value","enableService","valueChange"],[1,"flex","justify-content-end"],["label","Save","icon","pi pi-check","severity","success",3,"disabled","onClick"],["label","Cancel","icon","pi pi-times","severity","danger",1,"ml-2",3,"routerLink"],[3,"routerLink"]],template:function(s,o){if(1&s&&(e.TgZ(0,"div",0)(1,"p-card",1)(2,"form",2),e.NdJ("ngSubmit",function(){return o.form.valid}),e.TgZ(3,"div",3)(4,"div",4)(5,"label",5),e._uU(6,"ID"),e.qZA(),e._UZ(7,"input",6),e.qZA(),e.TgZ(8,"div",4)(9,"label",7),e._uU(10,"Name"),e.qZA(),e._UZ(11,"input",8),e.qZA()()(),e.YNc(12,D,1,2,"p-messages",9)(13,E,3,3,"ng-template",10),e.qZA(),e.TgZ(14,"p-card",11),e.YNc(15,q,3,0,"ul"),e.ALo(16,"async"),e.qZA()()),2&s){let r;e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("maxlength",4),e.xp6(4),e.Q6J("maxlength",25),e.xp6(1),e.um2(12,o.errors.length?12:-1),e.xp6(3),e.um2(15,(r=e.lcZ(16,5,o.teams$))?15:-1,r)}},dependencies:[h.ez,h.Ov,c.Bz,c.rH,f.d,f.Z,U.jx,u.hJ,u.zx,m.UX,m._Y,m.Fj,m.JJ,m.JL,m.nD,m.sg,m.u,S.j,S.o,Z.$,Z.V,P.z,P.u],encapsulation:2})}return n})(),V=(()=>{class n{static#t=this.\u0275fac=function(s){return new(s||n)};static#n=this.\u0275mod=e.oAB({type:n});static#e=this.\u0275inj=e.cJS({imports:[c.Bz.forChild([{path:"",component:$},{path:"teams/:id",component:z},{path:"create-team",component:R}]),c.Bz]})}return n})()}}]);